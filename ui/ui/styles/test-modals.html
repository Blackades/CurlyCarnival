<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal System Test</title>
    <link rel="stylesheet" href="base/variables.css">
    <link rel="stylesheet" href="base/reset.css">
    <link rel="stylesheet" href="base/typography.css">
    <link rel="stylesheet" href="components/buttons.css">
    <link rel="stylesheet" href="components/modals.css">
    <link rel="stylesheet" href="utilities/spacing.css">
    <link rel="stylesheet" href="utilities/colors.css">
    <link rel="stylesheet" href="utilities/display.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            padding: 20px;
            background: var(--background-secondary);
        }
        .demo-section {
            margin-bottom: 40px;
            padding: 20px;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }
        .demo-section h2 {
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        .btn-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <h1>Modal/Dialog System Test</h1>
    
    <!-- Modal Size Variants -->
    <div class="demo-section">
        <h2>Modal Size Variants</h2>
        <div class="btn-group">
            <button class="btn btn-primary" onclick="openModal('modal-sm')">Small Modal</button>
            <button class="btn btn-primary" onclick="openModal('modal-md')">Default Modal</button>
            <button class="btn btn-primary" onclick="openModal('modal-lg')">Large Modal</button>
            <button class="btn btn-primary" onclick="openModal('modal-xl')">Extra Large Modal</button>
        </div>
    </div>

    <!-- Modal Types -->
    <div class="demo-section">
        <h2>Modal Types</h2>
        <div class="btn-group">
            <button class="btn btn-info" onclick="openModal('modal-info')">Info Modal</button>
            <button class="btn btn-success" onclick="openModal('modal-success')">Success Modal</button>
            <button class="btn btn-warning" onclick="openModal('modal-warning')">Warning Modal</button>
            <button class="btn btn-danger" onclick="openModal('modal-danger')">Danger Modal</button>
        </div>
    </div>

    <!-- Special Modals -->
    <div class="demo-section">
        <h2>Special Modal Variants</h2>
        <div class="btn-group">
            <button class="btn btn-default" onclick="openModal('modal-scrollable')">Scrollable Modal</button>
            <button class="btn btn-default" onclick="openModal('modal-fullwidth')">Full Width Modal</button>
            <button class="btn btn-default" onclick="openModal('modal-bottom-sheet')">Bottom Sheet (Mobile)</button>
        </div>
    </div>

    <!-- Small Modal -->
    <div id="modal-sm" class="modal modal-sm">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title">Small Modal</h3>
                <button class="modal-close" onclick="closeModal('modal-sm')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This is a small modal with reduced padding and font sizes. Perfect for simple confirmations or quick actions.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-sm')">Cancel</button>
                <button class="btn btn-primary">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Default Modal -->
    <div id="modal-md" class="modal modal-md">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title">Default Modal</h3>
                <button class="modal-close" onclick="closeModal('modal-md')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This is the default modal size with standard padding and typography. It's suitable for most use cases including forms, content display, and user interactions.</p>
                <p>The modal has a maximum width of 600px and will be responsive on smaller screens.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-md')">Cancel</button>
                <button class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Large Modal -->
    <div id="modal-lg" class="modal modal-lg">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title">Large Modal</h3>
                <button class="modal-close" onclick="closeModal('modal-lg')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This is a large modal with increased padding and maximum width of 900px. It's perfect for complex forms, detailed content, or when you need more space.</p>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div>
                        <h4>Left Column</h4>
                        <p>Content can be organized in multiple columns in larger modals.</p>
                    </div>
                    <div>
                        <h4>Right Column</h4>
                        <p>This provides better use of the available space.</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-lg')">Cancel</button>
                <button class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Extra Large Modal -->
    <div id="modal-xl" class="modal modal-xl">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title">Extra Large Modal</h3>
                <button class="modal-close" onclick="closeModal('modal-xl')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This is an extra large modal with maximum width of 1200px. It's suitable for complex interfaces, data tables, or detailed forms.</p>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div>
                        <h4>Column 1</h4>
                        <p>Extra large modals can accommodate multiple columns of content.</p>
                    </div>
                    <div>
                        <h4>Column 2</h4>
                        <p>This makes them perfect for complex interfaces.</p>
                    </div>
                    <div>
                        <h4>Column 3</h4>
                        <p>Or detailed data presentation.</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-xl')">Cancel</button>
                <button class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Info Modal -->
    <div id="modal-info" class="modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <i class="fas fa-info-circle modal-icon text-info"></i>
                <h3 class="modal-title">Information</h3>
                <button class="modal-close" onclick="closeModal('modal-info')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This is an informational modal with an icon in the header. It's used to display important information to the user.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-info" onclick="closeModal('modal-info')">Got it</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="modal-success" class="modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <i class="fas fa-check-circle modal-icon text-success"></i>
                <h3 class="modal-title">Success</h3>
                <button class="modal-close" onclick="closeModal('modal-success')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Operation completed successfully! This modal confirms that the action was performed without any issues.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" onclick="closeModal('modal-success')">Continue</button>
            </div>
        </div>
    </div>

    <!-- Warning Modal -->
    <div id="modal-warning" class="modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <i class="fas fa-exclamation-triangle modal-icon text-warning"></i>
                <h3 class="modal-title">Warning</h3>
                <button class="modal-close" onclick="closeModal('modal-warning')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This action requires your attention. Please review the information carefully before proceeding.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-warning')">Cancel</button>
                <button class="btn btn-warning">Proceed</button>
            </div>
        </div>
    </div>

    <!-- Danger Modal -->
    <div id="modal-danger" class="modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <i class="fas fa-exclamation-circle modal-icon text-danger"></i>
                <h3 class="modal-title">Confirm Deletion</h3>
                <button class="modal-close" onclick="closeModal('modal-danger')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p><strong>This action cannot be undone.</strong></p>
                <p>Are you sure you want to delete this item? All associated data will be permanently removed.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-danger')">Cancel</button>
                <button class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>

    <!-- Scrollable Modal -->
    <div id="modal-scrollable" class="modal modal-scrollable">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title">Scrollable Modal</h3>
                <button class="modal-close" onclick="closeModal('modal-scrollable')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This modal has a lot of content that requires scrolling. The header and footer remain fixed while the body content scrolls.</p>
                <div style="height: 200px; background: var(--background-secondary); padding: 20px; margin: 20px 0; border-radius: var(--radius-sm);">
                    <p>Content block 1</p>
                </div>
                <div style="height: 200px; background: var(--background-secondary); padding: 20px; margin: 20px 0; border-radius: var(--radius-sm);">
                    <p>Content block 2</p>
                </div>
                <div style="height: 200px; background: var(--background-secondary); padding: 20px; margin: 20px 0; border-radius: var(--radius-sm);">
                    <p>Content block 3</p>
                </div>
                <div style="height: 200px; background: var(--background-secondary); padding: 20px; margin: 20px 0; border-radius: var(--radius-sm);">
                    <p>Content block 4</p>
                </div>
                <div style="height: 200px; background: var(--background-secondary); padding: 20px; margin: 20px 0; border-radius: var(--radius-sm);">
                    <p>Content block 5</p>
                </div>
                <p>End of scrollable content.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-scrollable')">Close</button>
            </div>
        </div>
    </div>

    <!-- Full Width Modal -->
    <div id="modal-fullwidth" class="modal modal-fullwidth">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title">Full Width Modal</h3>
                <button class="modal-close" onclick="closeModal('modal-fullwidth')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This modal takes up the full width of the screen (minus padding). It's useful for wide content like tables or complex forms.</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div style="background: var(--background-secondary); padding: 16px; border-radius: var(--radius-sm);">Item 1</div>
                    <div style="background: var(--background-secondary); padding: 16px; border-radius: var(--radius-sm);">Item 2</div>
                    <div style="background: var(--background-secondary); padding: 16px; border-radius: var(--radius-sm);">Item 3</div>
                    <div style="background: var(--background-secondary); padding: 16px; border-radius: var(--radius-sm);">Item 4</div>
                    <div style="background: var(--background-secondary); padding: 16px; border-radius: var(--radius-sm);">Item 5</div>
                    <div style="background: var(--background-secondary); padding: 16px; border-radius: var(--radius-sm);">Item 6</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-fullwidth')">Close</button>
            </div>
        </div>
    </div>

    <!-- Bottom Sheet Modal (Mobile) -->
    <div id="modal-bottom-sheet" class="modal modal-bottom-sheet">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title">Bottom Sheet</h3>
                <button class="modal-close" onclick="closeModal('modal-bottom-sheet')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>This modal appears as a bottom sheet on mobile devices, sliding up from the bottom of the screen.</p>
                <p>On desktop, it behaves like a regular modal.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeModal('modal-bottom-sheet')">Close</button>
                <button class="btn btn-primary">Action</button>
            </div>
        </div>
    </div>

    <!-- Modal Backdrop -->
    <div id="modal-backdrop" class="modal-backdrop"></div>

    <script>
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            const backdrop = document.getElementById('modal-backdrop');
            
            if (modal && backdrop) {
                backdrop.classList.add('show');
                modal.classList.add('show');
                document.body.style.overflow = 'hidden';
                
                // Focus management
                const firstFocusable = modal.querySelector('button, input, select, textarea, [tabindex]:not([tabindex="-1"])');
                if (firstFocusable) {
                    firstFocusable.focus();
                }
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            const backdrop = document.getElementById('modal-backdrop');
            
            if (modal && backdrop) {
                modal.classList.remove('show');
                backdrop.classList.remove('show');
                document.body.style.overflow = '';
            }
        }

        // Close modal when clicking backdrop
        document.getElementById('modal-backdrop').addEventListener('click', function() {
            const openModal = document.querySelector('.modal.show');
            if (openModal) {
                closeModal(openModal.id);
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const openModal = document.querySelector('.modal.show');
                if (openModal) {
                    closeModal(openModal.id);
                }
            }
        });

        // Trap focus within modal
        document.addEventListener('keydown', function(e) {
            const openModal = document.querySelector('.modal.show');
            if (openModal && e.key === 'Tab') {
                const focusableElements = openModal.querySelectorAll('button, input, select, textarea, [tabindex]:not([tabindex="-1"])');
                const firstFocusable = focusableElements[0];
                const lastFocusable = focusableElements[focusableElements.length - 1];

                if (e.shiftKey) {
                    if (document.activeElement === firstFocusable) {
                        lastFocusable.focus();
                        e.preventDefault();
                    }
                } else {
                    if (document.activeElement === lastFocusable) {
                        firstFocusable.focus();
                        e.preventDefault();
                    }
                }
            }
        });
    </script>
</body>
</html>