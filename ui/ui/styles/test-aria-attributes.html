<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARIA Attributes Test - PHPNuxBill Modern UI</title>
    <link rel="stylesheet" href="base/variables.css">
    <link rel="stylesheet" href="base/reset.css">
    <link rel="stylesheet" href="base/typography.css">
    <link rel="stylesheet" href="components/buttons.css">
    <link rel="stylesheet" href="components/forms.css">
    <link rel="stylesheet" href="components/alerts.css">
    <link rel="stylesheet" href="components/modals.css">
    <link rel="stylesheet" href="components/tables.css">
    <link rel="stylesheet" href="utilities/spacing.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        body {
            padding: 40px 20px;
            background: var(--background-secondary);
        }
        .test-section {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }
        .test-section h2 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-light);
        }
        .test-item {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--background-secondary);
            border-radius: var(--radius-sm);
        }
        .test-item h4 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        .code-block {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 13px;
            margin-top: 10px;
            overflow-x: auto;
        }
        .pass {
            color: var(--success-color);
            font-weight: 600;
        }
        .fail {
            color: var(--danger-color);
            font-weight: 600;
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        .error-message {
            color: var(--danger-color);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; margin-bottom: 40px;">ARIA Attributes Test Suite</h1>
        
        <!-- Test Section 1: Icon-Only Buttons -->
        <div class="test-section">
            <h2>1. Icon-Only Buttons with aria-label</h2>
            
            <div class="test-item">
                <h4>Edit Button</h4>
                <button class="btn btn-primary" aria-label="Edit item">
                    <i class="fa fa-edit" aria-hidden="true"></i>
                </button>
                <div class="code-block">
                    &lt;button class="btn btn-primary" aria-label="Edit item"&gt;
                        &lt;i class="fa fa-edit" aria-hidden="true"&gt;&lt;/i&gt;
                    &lt;/button&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Edit item, button"</p>
            </div>
            
            <div class="test-item">
                <h4>Delete Button</h4>
                <button class="btn btn-danger" aria-label="Delete item">
                    <i class="fa fa-trash" aria-hidden="true"></i>
                </button>
                <div class="code-block">
                    &lt;button class="btn btn-danger" aria-label="Delete item"&gt;
                        &lt;i class="fa fa-trash" aria-hidden="true"&gt;&lt;/i&gt;
                    &lt;/button&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Delete item, button"</p>
            </div>
            
            <div class="test-item">
                <h4>View Button</h4>
                <button class="btn btn-info" aria-label="View details">
                    <i class="fa fa-eye" aria-hidden="true"></i>
                </button>
                <div class="code-block">
                    &lt;button class="btn btn-info" aria-label="View details"&gt;
                        &lt;i class="fa fa-eye" aria-hidden="true"&gt;&lt;/i&gt;
                    &lt;/button&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "View details, button"</p>
            </div>
            
            <div class="test-item">
                <h4>Close Button</h4>
                <button class="btn btn-default" aria-label="Close dialog">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
                <div class="code-block">
                    &lt;button class="btn btn-default" aria-label="Close dialog"&gt;
                        &lt;i class="fa fa-times" aria-hidden="true"&gt;&lt;/i&gt;
                    &lt;/button&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Close dialog, button"</p>
            </div>
        </div>
        
        <!-- Test Section 2: Form Validation with aria-describedby -->
        <div class="test-section">
            <h2>2. Form Validation with aria-describedby</h2>
            
            <div class="test-item">
                <h4>Required Field</h4>
                <form>
                    <div class="form-group">
                        <label for="username">Username <span class="required">*</span></label>
                        <input type="text" id="username" class="form-control" required 
                               aria-required="true" aria-describedby="username-help">
                        <small id="username-help" class="form-text text-muted">
                            Enter your username (required field)
                        </small>
                    </div>
                </form>
                <div class="code-block">
                    &lt;input type="text" id="username" required 
                           aria-required="true" aria-describedby="username-help"&gt;
                    &lt;small id="username-help"&gt;Enter your username&lt;/small&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Username, required, edit text. Enter your username (required field)"</p>
            </div>
            
            <div class="test-item">
                <h4>Field with Error</h4>
                <form>
                    <div class="form-group has-error">
                        <label for="email">Email</label>
                        <input type="email" id="email" class="form-control" 
                               aria-invalid="true" aria-describedby="email-error">
                        <div id="email-error" class="error-message" role="alert" aria-live="polite">
                            Please enter a valid email address
                        </div>
                    </div>
                </form>
                <div class="code-block">
                    &lt;input type="email" id="email" 
                           aria-invalid="true" aria-describedby="email-error"&gt;
                    &lt;div id="email-error" role="alert" aria-live="polite"&gt;
                        Please enter a valid email address
                    &lt;/div&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Email, invalid entry, edit text. Please enter a valid email address"</p>
            </div>
            
            <div class="test-item">
                <h4>Field with Success</h4>
                <form>
                    <div class="form-group has-success">
                        <label for="password">Password</label>
                        <input type="password" id="password" class="form-control" 
                               aria-invalid="false" aria-describedby="password-success">
                        <div id="password-success" class="text-success" role="status" aria-live="polite">
                            <i class="fa fa-check" aria-hidden="true"></i> Password is strong
                        </div>
                    </div>
                </form>
                <div class="code-block">
                    &lt;input type="password" id="password" 
                           aria-invalid="false" aria-describedby="password-success"&gt;
                    &lt;div id="password-success" role="status" aria-live="polite"&gt;
                        Password is strong
                    &lt;/div&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Password, secure edit text. Password is strong"</p>
            </div>
        </div>
        
        <!-- Test Section 3: Dynamic Content with aria-live -->
        <div class="test-section">
            <h2>3. Dynamic Content with aria-live</h2>
            
            <div class="test-item">
                <h4>Success Alert (Polite)</h4>
                <div class="alert alert-success" role="alert" aria-live="polite">
                    <i class="fa fa-check-circle" aria-hidden="true"></i>
                    <strong>Success!</strong> Your changes have been saved.
                </div>
                <div class="code-block">
                    &lt;div class="alert alert-success" role="alert" aria-live="polite"&gt;
                        &lt;i class="fa fa-check-circle" aria-hidden="true"&gt;&lt;/i&gt;
                        &lt;strong&gt;Success!&lt;/strong&gt; Your changes have been saved.
                    &lt;/div&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Alert: Success! Your changes have been saved." (politely, after current speech)</p>
            </div>
            
            <div class="test-item">
                <h4>Error Alert (Assertive)</h4>
                <div class="alert alert-danger" role="alert" aria-live="assertive">
                    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                    <strong>Error!</strong> Unable to process your request.
                </div>
                <div class="code-block">
                    &lt;div class="alert alert-danger" role="alert" aria-live="assertive"&gt;
                        &lt;i class="fa fa-exclamation-triangle" aria-hidden="true"&gt;&lt;/i&gt;
                        &lt;strong&gt;Error!&lt;/strong&gt; Unable to process your request.
                    &lt;/div&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Alert: Error! Unable to process your request." (immediately, interrupting current speech)</p>
            </div>
            
            <div class="test-item">
                <h4>Loading State</h4>
                <button class="btn btn-primary" aria-busy="true" aria-live="polite">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                    <span class="sr-only">Loading...</span>
                    Processing
                </button>
                <div class="code-block">
                    &lt;button class="btn btn-primary" aria-busy="true" aria-live="polite"&gt;
                        &lt;i class="fa fa-spinner fa-spin" aria-hidden="true"&gt;&lt;/i&gt;
                        &lt;span class="sr-only"&gt;Loading...&lt;/span&gt;
                        Processing
                    &lt;/button&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Processing, button, busy. Loading..."</p>
            </div>
            
            <div class="test-item">
                <h4>Status Update Region</h4>
                <div role="status" aria-live="polite" aria-atomic="true" style="padding: 15px; background: var(--info-bg); border-radius: 4px;">
                    <i class="fa fa-info-circle" aria-hidden="true"></i>
                    <span id="status-text">Uploading file... 45% complete</span>
                </div>
                <div class="code-block">
                    &lt;div role="status" aria-live="polite" aria-atomic="true"&gt;
                        &lt;span id="status-text"&gt;Uploading file... 45% complete&lt;/span&gt;
                    &lt;/div&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Uploading file... 45% complete" (entire region announced when updated)</p>
            </div>
        </div>
        
        <!-- Test Section 4: Decorative Icons with aria-hidden -->
        <div class="test-section">
            <h2>4. Decorative Icons with aria-hidden</h2>
            
            <div class="test-item">
                <h4>Button with Icon and Text</h4>
                <button class="btn btn-primary">
                    <i class="fa fa-save" aria-hidden="true"></i>
                    Save Changes
                </button>
                <div class="code-block">
                    &lt;button class="btn btn-primary"&gt;
                        &lt;i class="fa fa-save" aria-hidden="true"&gt;&lt;/i&gt;
                        Save Changes
                    &lt;/button&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Save Changes, button" (icon is hidden from screen reader)</p>
            </div>
            
            <div class="test-item">
                <h4>Alert with Icon</h4>
                <div class="alert alert-warning" role="alert">
                    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                    <strong>Warning:</strong> This action cannot be undone.
                </div>
                <div class="code-block">
                    &lt;div class="alert alert-warning" role="alert"&gt;
                        &lt;i class="fa fa-exclamation-triangle" aria-hidden="true"&gt;&lt;/i&gt;
                        &lt;strong&gt;Warning:&lt;/strong&gt; This action cannot be undone.
                    &lt;/div&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Alert: Warning: This action cannot be undone." (icon is decorative)</p>
            </div>
        </div>
        
        <!-- Test Section 5: Modal Dialog ARIA -->
        <div class="test-section">
            <h2>5. Modal Dialog ARIA Attributes</h2>
            
            <div class="test-item">
                <h4>Modal Structure</h4>
                <button class="btn btn-primary" data-toggle="modal" data-target="#testModal">
                    Open Modal
                </button>
                
                <div class="modal fade" id="testModal" tabindex="-1" role="dialog" 
                     aria-labelledby="testModalTitle" aria-hidden="true" aria-modal="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="testModalTitle">Confirm Action</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close dialog">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <p>Are you sure you want to proceed with this action?</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary">Confirm</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="code-block">
                    &lt;div class="modal" role="dialog" 
                         aria-labelledby="testModalTitle" aria-hidden="true" aria-modal="true"&gt;
                        &lt;div class="modal-dialog" role="document"&gt;
                            &lt;h5 id="testModalTitle"&gt;Confirm Action&lt;/h5&gt;
                            &lt;button aria-label="Close dialog"&gt;
                                &lt;span aria-hidden="true"&gt;&times;&lt;/span&gt;
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Confirm Action, dialog" (when modal opens)</p>
            </div>
        </div>
        
        <!-- Test Section 6: Navigation ARIA -->
        <div class="test-section">
            <h2>6. Navigation with ARIA Attributes</h2>
            
            <div class="test-item">
                <h4>Dropdown Menu</h4>
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" 
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Options
                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-label="Options menu">
                        <li role="menuitem"><a href="#">Action 1</a></li>
                        <li role="menuitem"><a href="#">Action 2</a></li>
                        <li role="menuitem"><a href="#">Action 3</a></li>
                    </ul>
                </div>
                <div class="code-block">
                    &lt;button aria-haspopup="true" aria-expanded="false"&gt;Options&lt;/button&gt;
                    &lt;ul role="menu" aria-label="Options menu"&gt;
                        &lt;li role="menuitem"&gt;&lt;a href="#"&gt;Action 1&lt;/a&gt;&lt;/li&gt;
                    &lt;/ul&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Options, button, has popup" (collapsed state)</p>
            </div>
            
            <div class="test-item">
                <h4>Breadcrumb Navigation</h4>
                <nav aria-label="Breadcrumb navigation" role="navigation">
                    <ol class="breadcrumb">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Products</a></li>
                        <li aria-current="page">Current Page</li>
                    </ol>
                </nav>
                <div class="code-block">
                    &lt;nav aria-label="Breadcrumb navigation" role="navigation"&gt;
                        &lt;ol class="breadcrumb"&gt;
                            &lt;li aria-current="page"&gt;Current Page&lt;/li&gt;
                        &lt;/ol&gt;
                    &lt;/nav&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Breadcrumb navigation, navigation landmark"</p>
            </div>
        </div>
        
        <!-- Test Section 7: Table ARIA -->
        <div class="test-section">
            <h2>7. Table with ARIA Attributes</h2>
            
            <div class="test-item">
                <h4>Data Table</h4>
                <table class="table table-striped">
                    <caption class="sr-only">Customer list</caption>
                    <thead>
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Email</th>
                            <th scope="col">Status</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>John Doe</td>
                            <td>john@example.com</td>
                            <td>Active</td>
                            <td>
                                <button class="btn btn-sm btn-primary" aria-label="Edit John Doe">
                                    <i class="fa fa-edit" aria-hidden="true"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" aria-label="Delete John Doe">
                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="code-block">
                    &lt;table&gt;
                        &lt;caption class="sr-only"&gt;Customer list&lt;/caption&gt;
                        &lt;thead&gt;
                            &lt;tr&gt;
                                &lt;th scope="col"&gt;Name&lt;/th&gt;
                            &lt;/tr&gt;
                        &lt;/thead&gt;
                    &lt;/table&gt;
                </div>
                <p><strong>Screen reader announces:</strong> "Customer list, table with 1 row and 4 columns"</p>
            </div>
        </div>
        
        <!-- Test Results Summary -->
        <div class="test-section">
            <h2>Test Results Summary</h2>
            <div id="test-results"></div>
        </div>
    </div>
    
    <script src="../scripts/aria-enhancements.js"></script>
    <script>
        // Run automated tests
        document.addEventListener('DOMContentLoaded', function() {
            const results = [];
            
            // Test 1: Check icon-only buttons have aria-label
            const iconButtons = document.querySelectorAll('button i.fa');
            let iconButtonsWithLabel = 0;
            iconButtons.forEach(function(icon) {
                const button = icon.closest('button');
                if (button && button.hasAttribute('aria-label')) {
                    iconButtonsWithLabel++;
                }
            });
            results.push({
                test: 'Icon-only buttons have aria-label',
                pass: iconButtonsWithLabel > 0,
                details: `${iconButtonsWithLabel} icon buttons with aria-label found`
            });
            
            // Test 2: Check decorative icons have aria-hidden
            const decorativeIcons = document.querySelectorAll('i[aria-hidden="true"]');
            results.push({
                test: 'Decorative icons have aria-hidden',
                pass: decorativeIcons.length > 0,
                details: `${decorativeIcons.length} decorative icons found`
            });
            
            // Test 3: Check form fields with errors have aria-describedby
            const errorFields = document.querySelectorAll('input[aria-invalid="true"]');
            let fieldsWithDescribedBy = 0;
            errorFields.forEach(function(field) {
                if (field.hasAttribute('aria-describedby')) {
                    fieldsWithDescribedBy++;
                }
            });
            results.push({
                test: 'Error fields have aria-describedby',
                pass: fieldsWithDescribedBy === errorFields.length,
                details: `${fieldsWithDescribedBy}/${errorFields.length} error fields with aria-describedby`
            });
            
            // Test 4: Check alerts have role and aria-live
            const alerts = document.querySelectorAll('.alert');
            let alertsWithAria = 0;
            alerts.forEach(function(alert) {
                if (alert.hasAttribute('role') && alert.hasAttribute('aria-live')) {
                    alertsWithAria++;
                }
            });
            results.push({
                test: 'Alerts have role and aria-live',
                pass: alertsWithAria === alerts.length,
                details: `${alertsWithAria}/${alerts.length} alerts with proper ARIA`
            });
            
            // Test 5: Check modal has proper ARIA
            const modals = document.querySelectorAll('.modal');
            let modalsWithAria = 0;
            modals.forEach(function(modal) {
                if (modal.hasAttribute('role') && 
                    modal.hasAttribute('aria-labelledby') && 
                    modal.hasAttribute('aria-hidden')) {
                    modalsWithAria++;
                }
            });
            results.push({
                test: 'Modals have proper ARIA attributes',
                pass: modalsWithAria === modals.length,
                details: `${modalsWithAria}/${modals.length} modals with proper ARIA`
            });
            
            // Test 6: Check tables have captions
            const tables = document.querySelectorAll('table');
            let tablesWithCaptions = 0;
            tables.forEach(function(table) {
                if (table.querySelector('caption')) {
                    tablesWithCaptions++;
                }
            });
            results.push({
                test: 'Tables have captions',
                pass: tablesWithCaptions === tables.length,
                details: `${tablesWithCaptions}/${tables.length} tables with captions`
            });
            
            // Display results
            const resultsContainer = document.getElementById('test-results');
            let html = '<ul style="list-style: none; padding: 0;">';
            results.forEach(function(result) {
                const statusClass = result.pass ? 'pass' : 'fail';
                const statusIcon = result.pass ? '✓' : '✗';
                html += `<li style="padding: 10px; margin-bottom: 10px; background: ${result.pass ? 'var(--success-bg)' : 'var(--danger-bg)'}; border-radius: 4px;">
                    <span class="${statusClass}">${statusIcon} ${result.test}</span><br>
                    <small>${result.details}</small>
                </li>`;
            });
            html += '</ul>';
            resultsContainer.innerHTML = html;
            
            const passedTests = results.filter(r => r.pass).length;
            const totalTests = results.length;
            resultsContainer.innerHTML += `<p style="font-size: 18px; font-weight: 600; text-align: center; margin-top: 20px;">
                ${passedTests}/${totalTests} tests passed
            </p>`;
        });
    </script>
</body>
</html>
