/**
 * Mobile Accessibility Enhancements
 * PHPNuxBill Modern UI - WCAG 2.1 Level AA Compliance
 * 
 * This stylesheet provides mobile-specific accessibility enhancements
 * to meet WCAG 2.1 touch target size requirements (44×44px minimum).
 * 
 * Include this file after phpnuxbill-modern.css for mobile devices.
 */

/* ============================================================================
   Touch Target Size Enhancements (WCAG 2.1 - 2.5.5)
   Minimum 44×44 CSS pixels for all interactive elements
   ========================================================================= */

@media (max-width: 768px) {
    
    /* ========================================================================
       Buttons - Increase to 44px minimum height
       ====================================================================== */
    
    .btn,
    button.btn,
    input[type="submit"].btn,
    input[type="button"].btn,
    input[type="reset"].btn,
    a.btn {
        min-height: 44px;
        padding: 12px 16px;
        line-height: 1.4;
    }
    
    /* Small buttons on mobile should still meet minimum */
    .btn-sm,
    .btn-group-sm > .btn {
        min-height: 44px;
        padding: 10px 14px;
    }
    
    /* Large buttons */
    .btn-lg,
    .btn-group-lg > .btn {
        min-height: 48px;
        padding: 14px 20px;
    }
    
    /* Extra small buttons - increase to minimum */
    .btn-xs {
        min-height: 44px;
        padding: 10px 12px;
    }
    
    /* Icon buttons */
    .btn-icon {
        min-width: 44px;
        min-height: 44px;
    }
    
    .btn-icon.btn-sm {
        min-width: 44px;
        min-height: 44px;
    }
    
    .btn-icon.btn-lg {
        min-width: 48px;
        min-height: 48px;
    }
    
    .btn-icon.btn-xs {
        min-width: 44px;
        min-height: 44px;
    }
    
    /* ========================================================================
       Form Controls - Increase to 44px minimum height
       ====================================================================== */
    
    .form-control,
    input[type="text"],
    input[type="password"],
    input[type="email"],
    input[type="number"],
    input[type="tel"],
    input[type="url"],
    input[type="search"],
    input[type="date"],
    input[type="time"],
    input[type="datetime-local"],
    select.form-control,
    .form-control select {
        min-height: 44px;
        padding: 12px;
        font-size: 16px; /* Prevents zoom on iOS */
    }
    
    /* Textarea */
    textarea.form-control {
        min-height: 88px; /* 2× minimum for multi-line */
        padding: 12px;
        font-size: 16px;
    }
    
    /* Small form controls */
    .form-control.input-sm,
    .input-group-sm > .form-control,
    .input-group-sm > .input-group-addon,
    .input-group-sm > .input-group-btn > .btn {
        min-height: 44px;
        padding: 10px 12px;
        font-size: 16px;
    }
    
    /* Large form controls */
    .form-control.input-lg,
    .input-group-lg > .form-control,
    .input-group-lg > .input-group-addon,
    .input-group-lg > .input-group-btn > .btn {
        min-height: 48px;
        padding: 14px 16px;
        font-size: 18px;
    }
    
    /* Input group addons */
    .input-group-addon {
        min-height: 44px;
        padding: 12px;
    }
    
    /* Select dropdowns */
    select.form-control,
    .form-control select {
        min-height: 44px;
        padding: 12px 36px 12px 12px;
        font-size: 16px;
    }
    
    select.form-control.input-sm,
    .input-group-sm > select.form-control {
        min-height: 44px;
        padding: 10px 32px 10px 12px;
    }
    
    select.form-control.input-lg,
    .input-group-lg > select.form-control {
        min-height: 48px;
        padding: 14px 40px 14px 16px;
    }
    
    /* ========================================================================
       Checkbox    
   
 /* ========================================================================
       Checkboxes and Radio Buttons - Increase touch area
       ====================================================================== */
    
    /* Increase checkbox/radio visual size */
    .checkbox label::before,
    .radio label::before,
    input[type="checkbox"].styled + label::before,
    input[type="radio"].styled + label::before {
        width: 24px;
        height: 24px;
        margin-right: 12px;
    }
    
    /* Increase checkbox icon size */
    .checkbox input[type="checkbox"]:checked + label::before,
    input[type="checkbox"].styled:checked + label::before {
        background-size: 16px;
    }
    
    /* Add padding around checkbox/radio labels for larger touch area */
    .checkbox label,
    .radio label {
        padding: 12px 0;
        min-height: 44px;
        display: inline-flex;
        align-items: center;
    }
    
    /* Inline checkboxes and radios */
    .checkbox-inline,
    .radio-inline {
        padding: 12px 16px 12px 0;
        min-height: 44px;
    }
    
    .checkbox-inline::before,
    .radio-inline::before {
        width: 24px;
        height: 24px;
        margin-right: 12px;
    }
    
    /* Switch toggle - already meets width requirement, increase height */
    .switch {
        width: 52px;
        height: 28px;
    }
    
    .switch .slider {
        border-radius: 28px;
    }
    
    .switch .slider::before {
        height: 24px;
        width: 24px;
        left: 2px;
        bottom: 2px;
    }
    
    .switch input[type="checkbox"]:checked + .slider::before {
        transform: translateX(24px);
    }
    
    /* ========================================================================
       Links - Increase touch area with padding
       ====================================================================== */
    
    a {
        padding: 4px 0;
        display: inline-block;
    }
    
    /* Navigation links */
    .nav > li > a {
        min-height: 44px;
        padding: 12px 15px;
        display: flex;
        align-items: center;
    }
    
    /* Breadcrumb links */
    .breadcrumb > li > a {
        padding: 8px 4px;
    }
    
    /* Pagination links */
    .pagination > li > a,
    .pagination > li > span {
        min-height: 44px;
        min-width: 44px;
        padding: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* ========================================================================
       Table Action Buttons - Increase spacing and size
       ====================================================================== */
    
    .table .btn {
        min-height: 44px;
        margin: 2px;
    }
    
    .table .btn-group {
        gap: 8px;
    }
    
    .table .btn-icon {
        min-width: 44px;
        min-height: 44px;
    }
    
    /* ========================================================================
       Dropdown Menus - Increase item height
       ====================================================================== */
    
    .dropdown-menu > li > a {
        min-height: 44px;
        padding: 12px 20px;
        display: flex;
        align-items: center;
    }
    
    /* ========================================================================
       Modal Buttons - Ensure adequate size
       ====================================================================== */
    
    .modal-footer .btn {
        min-height: 44px;
        padding: 12px 20px;
        margin: 4px;
    }
    
    .modal-header .close {
        min-width: 44px;
        min-height: 44px;
        padding: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* ========================================================================
       Tabs - Increase tab button height
       ====================================================================== */
    
    .nav-tabs > li > a {
        min-height: 44px;
        padding: 12px 16px;
    }
    
    .nav-pills > li > a {
        min-height: 44px;
        padding: 12px 16px;
    }
    
    /* ========================================================================
       Badges and Labels - Ensure readable size
       ====================================================================== */
    
    .badge,
    .label {
        min-height: 24px;
        padding: 4px 10px;
        font-size: 14px;
        line-height: 1.4;
    }
    
    /* ========================================================================
       Form Spacing - Increase for easier interaction
       ====================================================================== */
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label,
    .control-label {
        margin-bottom: 10px;
        font-size: 16px;
    }
    
    /* ========================================================================
       Button Groups - Increase spacing between buttons
       ====================================================================== */
    
    .btn-group > .btn,
    .btn-group-vertical > .btn {
        margin: 2px;
    }
    
    .btn-toolbar {
        gap: 12px;
    }
    
    /* ========================================================================
       Select2 Plugin - Increase touch targets
       ====================================================================== */
    
    .select2-container--default .select2-selection--single {
        min-height: 44px;
        padding: 12px;
    }
    
    .select2-container--default .select2-selection--single .select2-selection__rendered {
        line-height: 20px;
        font-size: 16px;
    }
    
    .select2-container--default .select2-selection--single .select2-selection__arrow {
        height: 42px;
    }
    
    .select2-container--default .select2-selection--multiple {
        min-height: 44px;
        padding: 8px 12px;
    }
    
    .select2-container--default .select2-results__option {
        min-height: 44px;
        padding: 12px 16px;
        font-size: 16px;
    }
    
    .select2-search--dropdown .select2-search__field {
        min-height: 44px;
        padding: 12px;
        font-size: 16px;
    }
}


/* ============================================================================
   Motion Preferences (WCAG 2.1 - 2.3.3)
   Respect user's motion preferences for accessibility
   ========================================================================= */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    /* Remove loading spinner animation */
    .btn.btn-loading::before {
        animation: none !important;
    }
}

/* ============================================================================
   High Contrast Mode Support
   Ensure visibility in Windows High Contrast Mode
   ========================================================================= */

@media (prefers-contrast: high) {
    /* Ensure borders are visible */
    .btn,
    .form-control,
    .checkbox label::before,
    .radio label::before {
        border-width: 2px;
    }
    
    /* Ensure focus indicators are visible */
    .btn:focus,
    .form-control:focus,
    a:focus {
        outline: 2px solid;
        outline-offset: 2px;
    }
}

/* ============================================================================
   Screen Reader Only Content
   Hide visually but keep accessible to screen readers
   ========================================================================= */

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

.sr-only-focusable:active,
.sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* ============================================================================
   Focus Visible Enhancement
   Enhanced focus indicators for keyboard navigation
   ========================================================================= */

/* Only show focus styles for keyboard navigation, not mouse clicks */
.btn:focus:not(:focus-visible) {
    box-shadow: none;
}

.btn:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

.form-control:focus:not(:focus-visible) {
    box-shadow: none;
}

.form-control:focus-visible {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.2);
}

/* ============================================================================
   Print Accessibility
   Ensure content is accessible when printed
   ========================================================================= */

@media print {
    /* Show link URLs after link text */
    a[href]:after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
        color: #666;
    }
    
    /* Don't show URLs for internal links */
    a[href^="#"]:after,
    a[href^="javascript:"]:after {
        content: "";
    }
    
    /* Ensure sufficient contrast for printing */
    body {
        color: #000;
        background: #fff;
    }
    
    /* Show form field values */
    input,
    select,
    textarea {
        border: 1px solid #000;
    }
}

/* ============================================================================
   Additional Mobile Optimizations
   ========================================================================= */

@media (max-width: 768px) {
    /* Increase font size for better readability */
    body {
        font-size: 16px;
        line-height: 1.6;
    }
    
    /* Increase heading sizes */
    h1, .h1 { font-size: 32px; }
    h2, .h2 { font-size: 26px; }
    h3, .h3 { font-size: 22px; }
    h4, .h4 { font-size: 18px; }
    h5, .h5 { font-size: 16px; }
    h6, .h6 { font-size: 14px; }
    
    /* Increase spacing for better touch interaction */
    .table > tbody > tr > td,
    .table > tbody > tr > th {
        padding: 12px;
    }
    
    /* Stack form labels and inputs vertically */
    .form-horizontal .control-label {
        text-align: left;
        margin-bottom: 8px;
    }
    
    /* Increase modal padding */
    .modal-body {
        padding: 20px;
    }
    
    .modal-header,
    .modal-footer {
        padding: 16px 20px;
    }
    
    /* Improve alert visibility */
    .alert {
        padding: 16px;
        font-size: 16px;
    }
    
    /* Increase card padding */
    .panel-body,
    .box-body {
        padding: 20px;
    }
}

/* ============================================================================
   Landscape Orientation Adjustments
   ========================================================================= */

@media (max-width: 768px) and (orientation: landscape) {
    /* Reduce vertical spacing in landscape mode */
    .form-group {
        margin-bottom: 16px;
    }
    
    .btn {
        min-height: 40px;
        padding: 10px 16px;
    }
    
    .form-control {
        min-height: 40px;
        padding: 10px 12px;
    }
}

/* ============================================================================
   Dark Mode Support (if implemented)
   Maintain accessibility in dark mode
   ========================================================================= */

@media (prefers-color-scheme: dark) {
    /* Ensure sufficient contrast in dark mode */
    /* Note: Implement only if dark mode is supported */
    
    /* Example: Adjust focus indicators for dark backgrounds */
    .btn:focus,
    .form-control:focus {
        box-shadow: 0 0 0 3px rgba(64, 169, 255, 0.4);
    }
}

/* ============================================================================
   End of Mobile Accessibility Enhancements
   ========================================================================= */
